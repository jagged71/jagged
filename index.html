<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conclave Arcana Memory Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a0033, #2d1b69, #4a148c);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #fff;
            animation: backgroundShimmer 15s ease-in-out infinite;
        }

        @keyframes backgroundShimmer {
            0%, 100% { background: linear-gradient(135deg, #1a0033, #2d1b69, #4a148c); }
            50% { background: linear-gradient(135deg, #2d1b69, #4a148c, #6a1b9a); }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            background: linear-gradient(45deg, #ffd700, #ff6b35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: titlePulse 3s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .game-info {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: clamp(10px, 3vw, 20px);
            margin-bottom: 20px;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
        }

        .score, .moves, .timer, .hints-remaining {
            background: rgba(255,255,255,0.1);
            padding: clamp(8px, 2vw, 10px) clamp(15px, 4vw, 20px);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .hints-remaining {
            background: rgba(255, 215, 0, 0.2);
            border-color: rgba(255, 215, 0, 0.4);
        }

        .score.pulse {
            animation: scorePulse 0.5s ease-in-out;
        }

        @keyframes scorePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); background: rgba(0, 255, 0, 0.3); }
        }

        .game-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(clamp(80px, 12vw, 120px), 1fr));
            gap: clamp(5px, 2vw, 15px);
            max-width: 95vw;
            width: 100%;
            margin-bottom: 20px;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
        }

        .card {
            width: 100%;
            aspect-ratio: 3/4;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            max-width: 160px;
            max-height: 220px;
        }

        .card:hover {
            transform: scale(1.05) rotateZ(2deg);
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px solid #ffd700;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .card-front {
            background: linear-gradient(135deg, #2a0845, #4a148c);
            color: #ffd700;
            transform: rotateY(180deg);
            padding: 5px;
        }

        .card-back {
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #000000, #ffffff);
            border-radius: 4px;
            padding: 5px;
        }

        .card-logo {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 5px;
        }

        .card-name {
            font-size: clamp(0.6rem, 1.5vw, 0.9rem);
            font-weight: bold;
            text-align: center;
            color: #fff;
            line-height: 1.1;
            padding: 0 5px;
        }

        .card.matched {
            opacity: 0.6;
            transform: scale(0.9);
            animation: matchedBounce 0.6s ease-out;
        }

        @keyframes matchedBounce {
            0% { transform: scale(1) rotateZ(0deg); }
            50% { transform: scale(1.2) rotateZ(5deg); }
            100% { transform: scale(0.9) rotateZ(0deg); }
        }

        .card.hint-glow {
            animation: hintGlow 2s ease-in-out;
            z-index: 10;
        }

        @keyframes hintGlow {
            0%, 100% { 
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 30px #ffd700, 0 0 50px #ffd700;
                transform: scale(1.05);
            }
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #ff6b35, #ffd700);
            color: #1a0033;
            min-width: 120px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,107,53,0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .victory-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: #ffd700;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            font-size: clamp(1rem, 3vw, 1.5rem);
            display: none;
            z-index: 1000;
            max-width: 90%;
            width: 400px;
            animation: victoryPop 0.6s ease-out;
        }

        @keyframes victoryPop {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .difficulty-selector {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .difficulty-selector select {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }

        .player-name-input {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .player-name-input input {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            min-width: 150px;
        }

        .high-scores {
            margin-top: 30px;
            width: 100%;
            max-width: 600px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .high-scores h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #ffd700;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        .high-scores table {
            width: 100%;
            border-collapse: collapse;
        }

        .high-scores th, .high-scores td {
            padding: clamp(4px, 1.5vw, 8px);
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: clamp(0.7rem, 2vw, 0.9rem);
        }

        .high-scores th {
            color: #ff6b35;
        }

        .audio-controls {
            margin: 20px 0;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .audio-controls button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            background: rgba(255,107,53,0.8);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-controls button:hover {
            background: rgba(255,107,53,1);
            transform: translateY(-1px);
        }

        .streak-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.9);
            color: #1a0033;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            transform: translateX(100px);
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 100;
        }

        .streak-indicator.show {
            transform: translateX(0);
            opacity: 1;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .game-container {
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
                gap: 6px;
                padding: 5px;
                max-width: 98vw;
            }

            .card {
                max-width: 120px;
                max-height: 160px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .btn {
                width: 80%;
                max-width: 200px;
            }

            .player-name-input,
            .difficulty-selector {
                flex-direction: column;
                text-align: center;
            }

            .player-name-input input,
            .difficulty-selector select {
                width: 100%;
                max-width: 200px;
            }

            .streak-indicator {
                top: 10px;
                right: 10px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .game-container {
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
                gap: 4px;
            }

            .card {
                max-width: 90px;
                max-height: 120px;
            }

            .game-info {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>⚔️ Conclave Arcana Memory Game ⚔️</h1>
        <p>Match the character images!</p>
    </div>

    <div class="player-name-input">
        <label for="playerName">Your Name: </label>
        <input type="text" id="playerName" placeholder="Enter your name">
    </div>

    <div class="difficulty-selector">
        <label for="difficulty">Difficulty: </label>
        <select id="difficulty">
            <option value="easy">Easy (16 cards)</option>
            <option value="medium" selected>Medium (36 cards)</option>
            <option value="hard">Hard (64 cards)</option>
            <option value="crazy">Crazy (144 cards)</option>
        </select>
    </div>

    <div class="game-info">
        <div class="score">Score: <span id="score">0</span></div>
        <div class="moves">Moves: <span id="moves">0</span></div>
        <div class="timer">Time: <span id="timer">00:00</span></div>
        <div class="hints-remaining">Hints: <span id="hintsRemaining">2</span></div>
    </div>

    <div class="streak-indicator" id="streakIndicator">
        🔥 Streak: <span id="streakCount">0</span>
    </div>

    <div class="game-container" id="gameContainer">
        <!-- Cards will be generated here -->
    </div>

    <div class="controls">
        <button class="btn" onclick="newGame()">New Game</button>
        <button class="btn" id="hintBtn" onclick="showHint()">Hint (Costs 10 pts)</button>
    </div>

    <div class="audio-controls">
        <button id="muteBtn">Mute</button>
        <label for="musicVolume">Music Volume:</label>
        <input type="range" id="musicVolume" min="0" max="1" step="0.01" value="0.5">

        <label for="sfxVolume">SFX Volume:</label>
        <input type="range" id="sfxVolume" min="0" max="1" step="0.01" value="1">
    </div>

    <div class="victory-message" id="victoryMessage">
        <h2>🎉 Victory! 🎉</h2>
        <p id="victoryText"></p>
        <button class="btn" onclick="hideVictory()">Play Again</button>
    </div>

    <div class="high-scores">
        <h2>🏆 High Scores 🏆</h2>
        <table id="highScoresTable">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Score</th>
                    <th>Difficulty</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody id="highScoresBody">
                <!-- High scores will be loaded here -->
            </tbody>
        </table>
    </div>

    <script>
const music = {
  themes: [
    new Audio('sounds/Fire of Praetoria.mp3'),
    new Audio('sounds/The Talisman.mp3'),
    new Audio('sounds/War Begins.mp3')
  ],
  currentTheme: null,
  isPlaying: false,

  init() {
    this.themes.forEach(theme => {
      theme.loop = true;
      theme.volume = 0.5;
    });
  },

  playRandom() {
    if (this.currentTheme) {
      this.fadeOut(this.currentTheme, 1000, () => {
        this.currentTheme.pause();
        this.currentTheme.currentTime = 0;
      });
    }

    let availableThemes = this.themes.filter(t => t !== this.currentTheme);
    this.currentTheme = availableThemes[Math.floor(Math.random() * availableThemes.length)];

    this.currentTheme.currentTime = 0;
    this.currentTheme.volume = 0;
    this.currentTheme.play();
    this.fadeIn(this.currentTheme, 1500);
    this.isPlaying = true;
  },

  fadeOut(audio, duration, callback) {
    const fadeInterval = 50;
    const steps = duration / fadeInterval;
    const stepSize = audio.volume / steps;

    const fade = setInterval(() => {
      if (audio.volume > stepSize) {
        audio.volume -= stepSize;
      } else {
        audio.volume = 0;
        clearInterval(fade);
        if (callback) callback();
      }
    }, fadeInterval);
  },

  fadeIn(audio, duration) {
    const targetVolume = 0.5;
    const fadeInterval = 50;
    const steps = duration / fadeInterval;
    const stepSize = targetVolume / steps;

    audio.volume = 0;
    const fade = setInterval(() => {
      if (audio.volume < targetVolume - stepSize) {
        audio.volume += stepSize;
      } else {
        audio.volume = targetVolume;
        clearInterval(fade);
      }
    }, fadeInterval);
  },

  toggle() {
    if (this.isPlaying) {
      this.fadeOut(this.currentTheme, 800);
    } else {
      this.fadeIn(this.currentTheme, 800);
    }
    this.isPlaying = !this.isPlaying;
  }
};

// 🔊 Sound Effects Library - Complete definition
const sounds = {
    flip: new Audio('sounds/flip.wav'),
    correct: new Audio('sounds/correct.wav'),
    complete: new Audio('sounds/complete.mp3'),
    keeptrying: new Audio('sounds/keeptrying.mp3'),
    pickle: new Audio('sounds/extrapickles.wav'),
    ohno1: new Audio('sounds/ohno.mp3'),
    ohno2: new Audio('sounds/ohno2.wav'),
    threeinarow: new Audio('sounds/threeinarow.mp3'),
    twoinarow: new Audio('sounds/twoinarow.mp3'),
    unstoppable: new Audio('sounds/unstoppable.mp3'),
    victory: new Audio('sounds/victory.mp3'),
    extrapickup: new Audio('sounds/extrapickup.wav'),
    heartbeat: new Audio('sounds/heartbeat.mp3'),
    ohyeah: new Audio('sounds/ohyeah.wav'),
    nopressure: new Audio('sounds/nopressure.mp3'),
    areyoutrying: new Audio('sounds/areyoutrying.mp3')
};

// Initialize sound effects with default volume
Object.values(sounds).forEach(sound => {
    sound.volume = 0.5;
});

// Initialize music when page loads
music.init();

// Audio control elements
const muteBtn = document.getElementById('muteBtn');
const musicVolumeSlider = document.getElementById('musicVolume');
const sfxVolumeSlider = document.getElementById('sfxVolume');

let isMuted = false;

// Helper function to update all SFX volumes
function updateSFXVolume(volume) {
    Object.values(sounds).forEach(sound => {
        sound.volume = volume;
    });
}

// Helper function to update all music volumes
function updateMusicVolume(volume) {
    music.themes.forEach(theme => {
        theme.volume = volume;
    });
}

// Toggle mute
muteBtn.addEventListener('click', () => {
    isMuted = !isMuted;

    if (isMuted) {
        // Mute everything
        updateMusicVolume(0);
        updateSFXVolume(0);
        muteBtn.textContent = 'Unmute';
    } else {
        // Restore volumes from sliders
        const musicVol = parseFloat(musicVolumeSlider.value);
        const sfxVol = parseFloat(sfxVolumeSlider.value);

        updateMusicVolume(musicVol);
        updateSFXVolume(sfxVol);
        muteBtn.textContent = 'Mute';
    }
});

// Update music volume
musicVolumeSlider.addEventListener('input', (e) => {
    if (!isMuted) {
        const vol = parseFloat(e.target.value);
        updateMusicVolume(vol);
    }
});

// Update sound effects volume
sfxVolumeSlider.addEventListener('input', (e) => {
    if (!isMuted) {
        const vol = parseFloat(e.target.value);
        updateSFXVolume(vol);
    }
});

// ✅ Start music on first user interaction
function startMusicOnFirstInteraction() {
    function playOnce() {
        music.playRandom();
        window.removeEventListener('click', playOnce);
        window.removeEventListener('keydown', playOnce);
        window.removeEventListener('touchstart', playOnce);
    }

    window.addEventListener('click', playOnce);
    window.addEventListener('keydown', playOnce);
    window.addEventListener('touchstart', playOnce);
	
}

startMusicOnFirstInteraction();

// Conclave Arcana characters
const conclaveCharacters = [
    { name: "Janni Oracle", image: "Janni Oracle.png" },
    { name: "Jicarilla the Rime", image: "Jicarilla the Rime.png" },
    { name: "Kavor Skarn", image: "Kavor Skarn.png" },
    { name: "Kaylia Silverleaf", image: "Kaylia Silverleaf.png" },
    { name: "Leolin Sifu", image: "Leolin Sifu.png" },
    { name: "Lucky Longshot", image: "Lucky Longshot.png" },
    { name: "Mad Kaboomist", image: "Mad Kaboomist.png" },
    { name: "Mahkah Hemlig", image: "Mahkah Hemlig.png" },
    { name: "Molten Elemental", image: "Molten Elemental.png" },
    { name: "Moribund Arrowbait", image: "Moribund Arrowbait.png" },
    { name: "Mystic Mudbinder", image: "Mystic Mudbinder.png" },
    { name: "Oridum Graybrow", image: "Oridum Graybrow.png" },
    { name: "Owlkin Geodesist", image: "Owlkin Geodesist.png" },
    { name: "Palifala Weslinath", image: "Palifala Weslinath.png" },
    { name: "Phlegmunculus", image: "Phlegmunculus.png" },
    { name: "Portly Cannoneer", image: "Portly Cannoneer.png" },
    { name: "Quillstorm Mage", image: "Quillstorm Mage.png" },
    { name: "Razi Clanktrap", image: "Razi Clanktrap.png" },
    { name: "Runic Skychonk", image: "Runic Skychonk.png" },
    { name: "Sacrosanct Shanker", image: "Sacrosanct Shanker.png" },
    { name: "Shadowfey Sheik", image: "Shadowfey Sheik.png" },
    { name: "Sheng Xiao", image: "Sheng Xiao.png" },
    { name: "Silverleaf Mage", image: "Silverleaf Mage.png" },
    { name: "Silverleaf Ranger", image: "Silverleaf Ranger.png" },
    { name: "Silverleaf Warlock", image: "Silverleaf Warlock.png" },
    { name: "Songale", image: "Songale.png" },
    { name: "Stampeding Calf", image: "Stampeding Calf.png" },
    { name: "Steppe Stalker", image: "Steppe Stalker.png" },
    { name: "Swiftbeard Stout", image: "Swiftbeard Stout.png" },
    { name: "Sylvaran Sentinel", image: "Sylvaran Sentinel.png" },
    { name: "Taye Loreswift", image: "Taye Loreswift.png" },
    { name: "Thragha", image: "Thragha.png" },
    { name: "Thraghun", image: "Thraghun.png" },
    { name: "Thunderous Herald", image: "Thunderous Herald.png" },
    { name: "Tidal Tsunamist", image: "Tidal Tsunamist.png" },
    { name: "Umbral Elemental", image: "Umbral Elemental.png" },
    { name: "Vicious Giraffe", image: "Vicious Giraffe.png" },
    { name: "Virid Venomancer", image: "Virid Venomancer.png" },
    { name: "Warwall Juggernaut", image: "Warwall Juggernaut.png" },
    { name: "Water Diviner", image: "Water Diviner.png" },
    { name: "Yaba's Pickle", image: "Yaba_s Pickle.png" },
    { name: "Zargrul", image: "Zargrul.png" },
    { name: "Abyssal Elemental", image: "Abyssal Elemental.png" },
    { name: "Aerial Shieldmaiden", image: "Aerial Shieldmaiden.png" },
    { name: "Anyu Huntswoman", image: "Anyu Huntswoman.png" },
    { name: "Aranduriel", image: "Aranduriel.png" },
    { name: "Arcane Skinwalker", image: "Arcane Skinwalker.png" },
    { name: "Archer Koi", image: "Archer Koi.png" },
    { name: "Archmage Yabanius", image: "Archmage Yabanius.png" },
    { name: "Ashen Cindergrim", image: "Ashen Cindergrim.png" },
    { name: "Auororal Elemental", image: "Auororal Elemental.png" },
    { name: "Bella Ratajowlski", image: "Bella Ratajowlski.png" },
    { name: "Bellowmancer", image: "Bellowmancer.png" },
    { name: "Blazebeard Merc", image: "Blazebeard Merc.png" },
    { name: "Bludgeon Hucker", image: "Bludgeon Hucker.png" },
    { name: "Boring Hobgoblin", image: "Boring Hobgoblin.png" },
    { name: "Bren Palesworn", image: "Bren Palesworn.png" },
    { name: "Bristleborn Brigand", image: "Bristleborn Brigand.png" },
    { name: "Buttercup Mauler", image: "Buttercup Mauler.png" },
    { name: "Calabash Sage", image: "Calabash Sage.png" },
    { name: "Canary Keeper", image: "Canary Keeper.png" },
    { name: "Caravan Guard", image: "Caravan Guard.png" },
    { name: "Cavewise Wayfinder", image: "Cavewise Wayfinder.png" },
    { name: "Conclave Artificer", image: "Conclave Artificer.png" },
    { name: "Conclave Tracker", image: "Conc
